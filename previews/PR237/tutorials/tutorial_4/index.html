<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Tutorial 4: Do You Know Our Mascot? - Learn About Transitions And Subactions! Â· Javis.jl</title><link rel="canonical" href="https://Wikunia.github.io/Javis.jl/tutorials/tutorial_4/"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Javis.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../"><strong>Information about Tutorials - Beginners Start Here!</strong></a></li><li><a class="tocitem" href="../tutorial_1/"><strong>Tutorial 1:</strong> Making Your First Javis Animation!</a></li><li><a class="tocitem" href="../tutorial_2/"><strong>Tutorial 2:</strong> What Are Actions?</a></li><li><a class="tocitem" href="../tutorial_3/"><strong>Tutorial 3:</strong> Rendering LaTeX with Javis!</a></li><li class="is-active"><a class="tocitem" href><strong>Tutorial 4:</strong> Do You Know Our Mascot? - Learn About Transitions And Subactions!</a><ul class="internal"><li><a class="tocitem" href="#Our-goal"><span>Our goal</span></a></li><li><a class="tocitem" href="#Learning-Outcomes"><span>Learning Outcomes</span></a></li><li><a class="tocitem" href="#Starting-with-the-Basics-of-SubAction"><span>Starting with the Basics of SubAction</span></a></li><li><a class="tocitem" href="#The-Upper-Part-of-the-Head"><span>The Upper Part of the Head</span></a></li><li><a class="tocitem" href="#Using-Transformations"><span>Using Transformations</span></a></li><li><a class="tocitem" href="#Conclusion"><span>Conclusion</span></a></li><li><a class="tocitem" href="#The-Code"><span>The Code</span></a></li></ul></li><li><a class="tocitem" href="../tutorial_5/"><strong>Tutorial 5:</strong> Scaling the Elements</a></li><li><a class="tocitem" href="../tutorial_6/"><strong>Tutorial 6:</strong> Using Animations.jl to Create something with more Pep!</a></li></ul></li><li><a class="tocitem" href="../../howto/">HowTo</a></li><li><a class="tocitem" href="../../examples/">Examples</a></li><li><a class="tocitem" href="../../mission/">Mission</a></li><li><a class="tocitem" href="../../references/">References</a></li><li><a class="tocitem" href="../../contributing/">Contributing</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href><strong>Tutorial 4:</strong> Do You Know Our Mascot? - Learn About Transitions And Subactions!</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href><strong>Tutorial 4:</strong> Do You Know Our Mascot? - Learn About Transitions And Subactions!</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Wikunia/Javis.jl/blob/master/docs/src/tutorials/tutorial_4.md#L" title="Edit on GitHub"><span class="docs-icon fab">ï‚›</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="**Tutorial-4:**-Do-You-Know-Our-Mascot?-Learn-About-Transitions-And-Subactions!"><a class="docs-heading-anchor" href="#**Tutorial-4:**-Do-You-Know-Our-Mascot?-Learn-About-Transitions-And-Subactions!"><strong>Tutorial 4:</strong> Do You Know Our Mascot? - Learn About Transitions And Subactions!</a><a id="**Tutorial-4:**-Do-You-Know-Our-Mascot?-Learn-About-Transitions-And-Subactions!-1"></a><a class="docs-heading-anchor-permalink" href="#**Tutorial-4:**-Do-You-Know-Our-Mascot?-Learn-About-Transitions-And-Subactions!" title="Permalink"></a></h1><p>You have learned a couple of cool features of Javis already. Now you&#39;re ready to finally meet our little mascot. Well actually you can&#39;t just see him, we have to create him first. ðŸ˜„</p><h2 id="Our-goal"><a class="docs-heading-anchor" href="#Our-goal">Our goal</a><a id="Our-goal-1"></a><a class="docs-heading-anchor-permalink" href="#Our-goal" title="Permalink"></a></h2><p>Let&#39;s create a list of what we want first</p><ul><li>a circular head</li><li>some hair</li><li>eyes</li><li>a nose</li><li>a moving mouth</li><li>he should say something</li></ul><h2 id="Learning-Outcomes"><a class="docs-heading-anchor" href="#Learning-Outcomes">Learning Outcomes</a><a id="Learning-Outcomes-1"></a><a class="docs-heading-anchor-permalink" href="#Learning-Outcomes" title="Permalink"></a></h2><p>This tutorial demonstrates the power of subactions. A <code>SubAction</code> can be used to finely manipulate objects in your animation or visualization. </p><p>From this tutorial, you will learn how to:</p><ol><li>Finely control objects by making them appear and disappear using a <code>SubAction</code>.</li><li>Move objects using a <code>SubAction</code>.</li><li>Learn Julia splatting syntax (the <code>...</code>) to create multiple actions quickly.</li></ol><h2 id="Starting-with-the-Basics-of-SubAction"><a class="docs-heading-anchor" href="#Starting-with-the-Basics-of-SubAction">Starting with the Basics of SubAction</a><a id="Starting-with-the-Basics-of-SubAction-1"></a><a class="docs-heading-anchor-permalink" href="#Starting-with-the-Basics-of-SubAction" title="Permalink"></a></h2><p>The <code>ground</code> function should be familiar to you as well as the general structure of the <code>javis</code> function if you have seen the first <a href="../tutorial_1/">tutorial</a>. In this tutorial, rather than calling the <code>javis</code> function by itself, we are going to be calling it from the function we are creating to create our mascot, <code>face</code>: </p><pre><code class="language-julia">using Javis

function ground(args...)
    background(&quot;white&quot;)
    sethue(&quot;black&quot;)
end

function title(args...)
    fontsize(20)
    text(&quot;Our Mascot&quot;, Point(0, -200),
        valign=:middle, halign=:center)
end

function face()
    video = Video(500, 500)
    javis(video, [
        BackgroundAction(1:150, ground),
        Action(title; subactions=[
            SubAction(1:5, appear(:fade)),
        ]),
    ], pathname=&quot;jarvis.gif&quot;, framerate=15)
end</code></pre><p>A new component introduced in this tutorial is shown in the second <code>Action</code>. It is the kwarg <code>subactions</code> followed by the object <code>SubAction</code>. A <code>SubAction</code> is invoked when you want to apply an additional action or provide an additional functionality to the original <code>Action</code>. Although one could use standard an <code>Action</code> to achieve the same functionality, <code>subactions</code> provide a much easier and more organized method that also improves readability.</p><blockquote><p><strong>NOTE:</strong> For an <code>Action</code> you can leave the frames arg blank.  The frames from the previous action are used. </p></blockquote><p>The <code>subactions</code> keyword uses a list of <a href="tutorials/@ref"><code>SubAction</code></a> structs which are defined in a similar fashion as <code>Action</code> with <code>frames</code> and a <code>function</code> but are in some sense simpler than the <code>Action</code>. </p><p>A function of a <code>SubAction</code> is normally either <a href="../../references/#Javis.appear-Tuple{Symbol}"><code>appear</code></a> or <a href="../../references/#Javis.disappear-Tuple{Symbol}"><code>disappear</code></a> at the moment or one of these transformations: <a href="../../references/#Javis.Translation"><code>Translation</code></a>, <a href="../../references/#Javis.Rotation"><code>Rotation</code></a> and <a href="../../references/#Javis.Scaling"><code>Scaling</code></a>.</p><p>In theory you can define your own but that is way outside of this tutorial.</p><p><strong>Let&#39;s summarize the functionality:</strong></p><p>With the invocation of <code>SubAction</code> in the <code>face</code> function, the <code>javis</code> function can be broken down as follows:</p><ul><li>We define our set, the background, for the animation using a <code>BackgroundAction</code>.</li><li>Using the <code>title</code> function, we invoke an <code>Action</code> and then provide a <code>SubAction</code>.<ul><li>The <code>SubAction</code> utilizes the <code>Javis.jl</code> provided function, <code>appear</code> to cause the title to slowly appear in the first 5 frames of the <code>Action</code>. </li></ul></li></ul><h2 id="The-Upper-Part-of-the-Head"><a class="docs-heading-anchor" href="#The-Upper-Part-of-the-Head">The Upper Part of the Head</a><a id="The-Upper-Part-of-the-Head-1"></a><a class="docs-heading-anchor-permalink" href="#The-Upper-Part-of-the-Head" title="Permalink"></a></h2><p>Let&#39;s continue with a bit more before we draw part of the mascot.</p><p>The following actions will just be added to the <code>javis</code> function.</p><pre><code class="language-julia">Action(16:150, (args...)-&gt;circle(O, 100, :stroke); subactions=[
    SubAction(1:15, appear(:fade)),
]),</code></pre><p>This is very similar to the previous action. Here we can see that <code>SubAction</code> uses relative frame numbers such that the head appears in the frames <code>16:30</code> and then is at full opacity afterwards.</p><blockquote><p><strong>NOTE:</strong> Just a small refresher: We need the anonymous function <code>(args...)-&gt;circle(O, 100, :stroke)</code> as each function gets called with the three arguments <code>video, action, frame</code>.</p></blockquote><h3 id="The-Power-of-Splatting"><a class="docs-heading-anchor" href="#The-Power-of-Splatting">The Power of Splatting</a><a id="The-Power-of-Splatting-1"></a><a class="docs-heading-anchor-permalink" href="#The-Power-of-Splatting" title="Permalink"></a></h3><p>Okay let&#39;s add some hair shall we?</p><p>I want to have some randomness in his hair so let&#39;s define:</p><pre><code class="language-julia">hair_angle = rand(-0.9:0.1:0.9, 20)</code></pre><p>at the beginning of the <code>face</code> function.</p><p>and have a hair function:</p><pre><code class="language-julia">function hair_blob(angle)
    sethue(&quot;brown&quot;)
    rotate(angle)
    circle(Point(0, -100), 20, :fill)
end</code></pre><p>It draws one brown hair blob given the angle. We basically rotate the whole canvas and then draw the circle always at the same local position. </p><p>Now how do we draw the hair without creating an action for each blob?</p><p>Well we actually create an Action for each blob but we can use a for loop for this.</p><p>We can use splatting for that :wink:</p><pre><code class="language-julia">[
    Action(26:150, (args...)-&gt;hair_blob(hair_angle[i]); subactions=[
        SubAction(1:25, appear(:fade)),
    ]) for i=1:20
]...,</code></pre><p>We first create a vector using the <code>[foobar for i=1:20]</code> notation but as the javis function expects <code>foobar, foobar, ..., foobar</code> without the vector we use splatting like <code>[foobar for i=1:20]...</code></p><p>I think you get the idea of how to use <code>appear</code> now. Let&#39;s add some eyes and a nose quickly before we draw our first gif.</p><pre><code class="language-julia">Action(30:150, (args...)-&gt;eyes(eye_centers, 10, &quot;darkblue&quot;); subactions=[
    SubAction(1:15, appear(:fade)),
]),
Action(45:150, (args...)-&gt;poly(nose, :fill); subactions=[
    SubAction(1:15, appear(:fade)),
]),</code></pre><p>with:</p><pre><code class="language-julia">eye_centers = [Point(-40,-30), Point(40,-30)]
nose = [O, Point(-10,20), Point(10, 20), O]</code></pre><p>and</p><pre><code class="language-julia">function eyes(centers, radius, color)
    sethue(color)
    circle.(centers, radius, :fill)
    setcolor(&quot;white&quot;)
    circle.(centers, radius/5, :fill)
end</code></pre><p><img src="../assets/jarvis_nose.gif" alt="Up to the nose"/></p><h2 id="Using-Transformations"><a class="docs-heading-anchor" href="#Using-Transformations">Using Transformations</a><a id="Using-Transformations-1"></a><a class="docs-heading-anchor-permalink" href="#Using-Transformations" title="Permalink"></a></h2><p>Let&#39;s give him some moving lips so he can communicate with us:</p><pre><code class="language-julia">upper_lip = [Point(-40, 45), Point(40, 45)]
lower_lip = [Point(-40, 55), Point(40, 55)]</code></pre><p>These are just the outer points of the lips:</p><pre><code class="language-julia">function lip(p1, p2)
    setline(2)
    move(p1)
    c1 = p1 + Point(10, 10)
    c2 = p2 + Point(-10, 10)
    curve(c1, c2, p2)
    do_action(:stroke)
end</code></pre><p>This function uses some more functions of the awesome Luxor package.</p><p>The lips should be a little thicker than the other lines that we have drawn so far so let&#39;s set <code>setline(2)</code>. (default is 1). First we move to the starting point of the lip and create two control points a bit below and to the vertical center.</p><p>The <code>curve</code> function is used to draw a cubic <a href="https://en.wikipedia.org/wiki/B%C3%A9zier_curve">BÃ©zier curve</a>.  It unfortunately doesn&#39;t support the <code>:stroke</code> at the end so we have to do this with <code>do_action(:stroke)</code> this time.</p><p>Now our two actions:</p><pre><code class="language-julia">Action(60:150, (args...)-&gt;lip(upper_lip...); subactions=[
    SubAction(1:15, appear(:fade)),
    [SubAction(20i:20i+10, Translation(0, -5)) for i in 1:5]...,
    [SubAction(20i+10:20i+20, Translation(0, 5)) for i in 1:5]...
]),
Action(60:150, (args...)-&gt;lip(lower_lip...); subactions=[
    SubAction(1:15, appear(:fade)),
    [SubAction(20i:20i+10, Translation(0, 5)) for i in 1:5]...,
    [SubAction(20i+10:20i+20, Translation(0, -5)) for i in 1:5]...
]),</code></pre><p>Yeah I like those <code>...</code> splatting ðŸ˜„</p><p>We fade them in at the beginning and then they shall move up and down a couple of times.</p><p>Finally let him speak:</p><pre><code class="language-julia">function speak(str)
    fontsize(15)
    text(str, Point(100, 50))
end</code></pre><pre><code class="language-julia">Action(80:120, (args...)-&gt;speak(&quot;I&#39;m Jarvis&quot;); subactions=[
    SubAction(1:5, appear(:fade)),
    SubAction(36:40, disappear(:fade)),
]),
Action(120:150, (args...)-&gt;speak(&quot;How are you?&quot;); subactions=[
    SubAction(1:5, appear(:fade)),
    SubAction(36:40, disappear(:fade)),
])</code></pre><p>This time we also use the <a href="../../references/#Javis.disappear-Tuple{Symbol}"><code>disappear</code></a> function to fade out the text.</p><p>Now, with everything properly defined using the <code>javis</code> function within the <code>face</code> function one can simply execute the following from your Julia REPL:</p><pre><code class="language-none">julia&gt; face()</code></pre><p>To produce the following:</p><p><img src="../assets/jarvis.gif" alt="Jarvis"/></p><p>Jarvis is alive! </p><h2 id="Conclusion"><a class="docs-heading-anchor" href="#Conclusion">Conclusion</a><a id="Conclusion-1"></a><a class="docs-heading-anchor-permalink" href="#Conclusion" title="Permalink"></a></h2><p>To recap, by working through this animation you should now:</p><ol><li>Understand how to make objects appear and disappear using subactions</li><li>Be able to move objects inside subactions to have a finer control of the movement</li><li>Know how to use splatting (the <code>...</code>) to create actions in a loop</li></ol><p>Hope you had as much fun reading this tutorial as I had creating our mascot.</p><p>You&#39;re now ready to create your own big project.</p><h2 id="The-Code"><a class="docs-heading-anchor" href="#The-Code">The Code</a><a id="The-Code-1"></a><a class="docs-heading-anchor-permalink" href="#The-Code" title="Permalink"></a></h2><pre><code class="language-julia">using Javis

function ground(args...)
    background(&quot;white&quot;)
    sethue(&quot;black&quot;)
end

function title(args...)
    fontsize(20)
    text(&quot;Our Mascot&quot;, Point(0, -200),
        valign=:middle, halign=:center)
end

function hair_blob(angle)
    sethue(&quot;brown&quot;)
    rotate(angle)
    circle(Point(0, -100), 20, :fill)
end

function eyes(centers, radius, color)
    sethue(color)
    circle.(centers, radius, :fill)
    setcolor(&quot;white&quot;)
    circle.(centers, radius/5, :fill)
end

function lip(p1, p2)
    setline(2)
    move(p1)
    c1 = p1 + Point(10, 10)
    c2 = p2 + Point(-10, 10)
    curve(c1, c2, p2)
    do_action(:stroke)
end

function speak(str)
    fontsize(15)
    text(str, Point(100, 50))
end

function face()
    eye_centers = [Point(-40,-30), Point(40,-30)]
    nose = [O, Point(-10,20), Point(10, 20), O]
    upper_lip = [Point(-40, 45), Point(40, 45)]
    lower_lip = [Point(-40, 55), Point(40, 55)]
    hair_angle = rand(-0.9:0.1:0.9, 20)

    video = Video(500, 500)
    javis(video, [
        BackgroundAction(1:150, ground),
        Action(title; subactions=[
            SubAction(1:5, appear(:fade)),
        ]),
        Action(16:150, (args...)-&gt;circle(O, 100, :stroke); subactions=[
            SubAction(1:15, appear(:fade)),
        ]),
        [
            Action(26:150, (args...)-&gt;hair_blob(hair_angle[i]); subactions=[
                SubAction(1:25, appear(:fade)),
            ]) for i=1:20
        ]...,
        Action(30:150, (args...)-&gt;eyes(eye_centers, 10, &quot;darkblue&quot;); subactions=[
            SubAction(1:15, appear(:fade)),
        ]),
        Action(45:150, (args...)-&gt;poly(nose, :fill); subactions=[
            SubAction(1:15, appear(:fade)),
        ]),
        Action(60:150, (args...)-&gt;lip(upper_lip...); subactions=[
            SubAction(1:15, appear(:fade)),
            [SubAction(20i:20i+10, Translation(0, -5)) for i in 1:5]...,
            [SubAction(20i+10:20i+20, Translation(0, 5)) for i in 1:5]...
        ]),
        Action(60:150, (args...)-&gt;lip(lower_lip...); subactions=[
            SubAction(1:15, appear(:fade)),
            [SubAction(20i:20i+10, Translation(0, 5)) for i in 1:5]...,
            [SubAction(20i+10:20i+20, Translation(0, -5)) for i in 1:5]...
        ]),
        Action(80:120, (args...)-&gt;speak(&quot;I&#39;m Jarvis&quot;); subactions=[
            SubAction(1:5, appear(:fade)),
            SubAction(36:40, disappear(:fade)),
        ]),
        Action(120:150, (args...)-&gt;speak(&quot;How are you?&quot;); subactions=[
            SubAction(1:5, appear(:fade)),
            SubAction(36:40, disappear(:fade)),
        ])
    ], pathname=&quot;jarvis.gif&quot;, framerate=15)
end</code></pre><blockquote><p><strong>Author(s):</strong> Ole KrÃ¶ger, Jacob Zelko <br/><strong>Date:</strong> August 14th, 2020 <br/><strong>Tag(s):</strong> jarvis, subactions, fade, transformations</p></blockquote></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../tutorial_3/">Â« <strong>Tutorial 3:</strong> Rendering LaTeX with Javis!</a><a class="docs-footer-nextpage" href="../tutorial_5/"><strong>Tutorial 5:</strong> Scaling the Elements Â»</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Thursday 22 October 2020 16:29">Thursday 22 October 2020</span>. Using Julia version 1.4.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
